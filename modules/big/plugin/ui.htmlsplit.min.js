define(function(require) {
    return function(a,b){var c=b.ui.HtmlSplit=function(c,d){var d=b.isType("json",d)?d:{},e=b.isType("string",d.show)?d.show:"显示更多…",f=b.isType("string",d.hide)?d.hide:"收起";this._wrapper=a(c),this._nodes=this._wrapper.children(),this._size=b.isType("number",d.size)?d.size:200,this._speed=b.isType("number",d.speed)?d.speed:800,this._easing=b.isType("string",d.easing)?b.getEasing(d.easing):b.getEasing("easeInOutQuart"),this.initialize(e,f)};return c.prototype={initialize:function(b,c){var d=this._wrapper.height(),e=this.getNode(),f=e.before,g=e.after,h=f.length-1,i=g.length-1;this._showBtn=a('<a href="javascript:;" class="-html-split-nav show-btn">'+b+"</a>"),this._hideBtn=a('<a href="javascript:;" class="-html-split-nav hide-btn">'+c+"</a>"),this.insertBtn(f[h],this._showBtn),this.insertBtn(g[i],this._hideBtn),this.bindEvent(d,this.appendHTML(f,g))},appendHTML:function(b,c){var d,e;for(this._wrapper.empty().addClass("-html-split"),d=0;d<b.length;d++)this._wrapper.append(b[d]);for(this._after=a('<div class="-html-split-after"></div>').css({opacity:0,display:"none",height:0}).appendTo(this._wrapper),e=0;e<c.length;e++)this._after.append(c[e]);return this._wrapper.height()},bindEvent:function(b,c){var d=this;this._showBtn.on("click",function(){d._after.show().animate({opacity:1,height:b-c},d._speed,d._easing),d._showBtn.fadeOut(200)}),this._hideBtn.on("click",function(){d._after.animate({opacity:0,height:0},d._speed,d._easing,function(){a(this).hide()}),d._showBtn.fadeIn(200)})},getIndex:function(){var c,e,b=[],d=0;for(this._nodes.each(function(c,d){var e=a(d).clone(),f=e.text();b.push(f)}),e=0;e<b.length;e++){if(d+=b[e].length,d>=this._size){c=e;break}c=e}return c},getNode:function(){var d,a=this.getIndex(),b=[],c=[];for(d=0;a>=d;d++)b.push(this._nodes[d]);for(d=a+1;d<this._nodes.length;d++)c.push(this._nodes[d]);return{before:b,after:c}},checkNodeType:function(b){var d,e,c=a("<div></div>");return c.append(b),e=c.html(),d=e.indexOf("</")>-1?!0:!1},insertBtn:function(b,c){this.checkNodeType(b)?a(b).append(c):a(b).after(c)}},c};
});