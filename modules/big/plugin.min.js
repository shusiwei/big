/*
 * name : Big Plugin
 * author : shusiwei
 * data : 2015/08/14
 * version : 1.0 beta
 */

define(function(require) {
    'use strict';
    require('./big.css');

    return function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n;return c=b.ui.ScrollFollow=function(c,d){var e,f,g,h,i,j,k,l;return c?(e=this,f=b.isType("json",d)?d:{},g=this._target=a(c).eq(0).addClass("-scroll-follow"),h=b.getSize(g),i=h.width,j=h.height,k=this._params={ease:b.isType("boolean",f.ease)?f.ease:!1,attach:b.isType("boolean",f.attach)?f.attach:!1,offset:b.isType("number",f.offset)&&f.offset<10&&f.offset>0?f.offset:5,speed:b.isType("number",f.speed)?f.speed:500,range:(b.isType("number",f.range)?f.range:980)+2*i},this.onReady=f.onReady,l=function(a){k.ease&&a!==!1?g.animate(b.getFixed({offset:k.offset,attach:k.attach,range:k.range,width:i,height:j},{ease:k.ease}),{duration:k.speed,queue:!1}):g.css(b.getFixed({offset:k.offset,attach:k.attach,range:k.range,width:i,height:j},{ease:k.ease}))},function(){b.ui.setFixed(g,k.ease),l(!1),b.evt.onChange(l),b.isType("function",e.onReady)&&e.onReady(e)}(),void 0):!1},d=b.ui.ChapterTrun=function(c,d){var e,f,g,h,i;return b.isType("array",c)||0!==c.length?(e=this,f=b.isType("json",d)?d:{},g=this._targets=[],h=void 0,this.onReady=f.onReady,this.onChange=f.onChange,i=function(){var c,d,f,i,j,k,a=b.size.height/2+b.size.top;for(d=0,f=g.length;f>d;d++)if(i=g[d][1],j=i.offset().top,k=j+i.height(),a>=j&&k>=a){c=d;break}b.each(g,function(a,b){void 0!==c?a!==c&&b[0].hasClass("active")?b[0].removeClass("active"):a===c&&(b[0].hasClass("active")||b[0].addClass("active")):b[0].removeClass("active")}),c!==h&&(h=c,b.isType("function",e.onChange)&&e.onChange(h))},function(c,d){b.each(c,function(c,e){var f=[],h=a(e.catalog).addClass("-chapter-trun-catalog"),i=a(e.chapter).addClass("-chapter-trun-chapter"),j={adjust:b.isType("number",e.adjust)?e.adjust:b.isType("number",d.adjust)?d.adjust:0,speed:b.isType("number",e.speed)?e.speed:b.isType("number",d.speed)?d.speed:1e3,easing:b.isType("string",e.easing)?e.easing:b.isType("string",d.easing)?d.easing:"easeInOutQuart",callback:b.isType("function",e.callback)?e.callback:b.isType("function",d.callback)?d.callback:null};h.on("click",function(){b.ui.pageScroll(i,j)}),f.push(h),f.push(i),f.push(j),g.push(f)}),b.evt.onChange(i),i(),b.isType("function",e.onReady)&&e.onReady(e)}(c,f),void 0):!1},e=b.ui.LightPopup=function(d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,x,y,z,A;return d||null===d?(f=this,g=b.isType("json",e)?e:{},h=this._params={width:b.isType("number",g.width)?g.width:200,height:b.isType("number",g.height)?g.height:200,speed:b.isType("number",g.speed)?g.speed:400},i=a(d),j=a(document.body),k=this._wrapper=a('<div class="-light-popup"></div>'),l=this._mask=a('<div class="-light-popup-mask"></div>'),m=this._origin=a('<div class="-light-popup-origin"></div>'),n=this._closeBtn=a('<a class="-light-popup-close"></a>'),o=this._container=a('<div class="-light-popup-container"></div>'),p=this._content=a('<div class="-light-popup-content"></div>'),q=!1,r=b.getRandom(),s=null,t=null,u=null,v={},this.onReady=g.onReady,this.onShow=g.onShow,this.onHide=g.onHide,this.onVisible=g.onVisible,this.onPopUp=g.onPopUp,this.onPopOff=g.onPopOff,this.onAppend=g.onAppend,o.append(n).append(p),m.append(o),k.append(l).append(m),this.show=function(c){s=f._target=a(c);var d=b.getSize(s);t={width:d.width,height:d.height,margin:0,opacity:0},j.append(k),x()},x=this.toggle=function(){q?(b.isType("function",f.onPopOff)&&f.onPopOff(f),v.zoomOut(t)):(b.isType("function",f.onPopUp)&&f.onPopUp(f),v.zoomIn(u,t))},y=this.setContent=function(a,c,d){p.empty().append(a),u=b.getFixed({offset:5,attach:!1,range:0,width:c||h.width,height:d||h.height},{fixed:!0,style:{opacity:1,width:c||h.width,height:d||h.height}}),b.isType("function",f.onAppend)&&f.onAppend(p.children(),f)},z=function(a){n[a]("click",x),l[a]("click",x)},A=function(a){switch(a){case"in":z("on"),q=!0,b.isType("function",f.onShow)&&f.onShow(f);break;case"out":q=!1,b.isType("function",f.onHide)&&f.onHide(f)}},function(a,d,e){b.isType("string",a)&&k.addClass(a),y(d,h.width,h.height);var e=b.isType("json",e)?e:{};e.icon=b.isType("boolean",e.icon)?e.icon:!1,e.under=b.isType("boolean",e.under)?e.under:!1,e.icon&&(n.append("<i></i>"),e.under&&n.append("<b></b>")),b.ui.keepFull(k,{callback:function(){new c(k,{offset:1})}}),b.each(function(){return b.checkIE(9,"lt")?{zoomIn:function(a){m.css(b.mergeJSON({position:"absolute"},a)),k.css({visibility:"hidden",display:"block"}),b.isType("function",f.onVisible)&&f.onVisible(f),k.css({visibility:"visible",display:"none",zIndex:b.getZIndex(k)}).fadeIn(h.speed,function(){A("in")})},zoomOut:function(){z("off"),k.fadeOut(h.speed,function(){k.detach(),A("out")})}}:{zoomIn:function(a,c){var d=s.offset();m.css(b.mergeJSON({left:d.left-b.size.left,top:d.top-b.size.top},c)),o.css({opacity:0}),b.ui.toggleBlur(r,{target:k,callback:function(){k.css({zIndex:b.getZIndex(k)}).fadeIn(h.speed,function(){m.animate(a,h.speed,function(){b.isType("function",f.onVisible)&&f.onVisible(f),o.animate({opacity:1},h.speed,function(){A("in")})})})}})},zoomOut:function(a){var c=s.offset();z("off"),o.animate({opacity:0},h.speed,function(){m.animate(b.mergeJSON({left:c.left-b.size.left,top:c.top-b.size.top},a),h.speed,function(){b.ui.toggleBlur(r,{callback:function(){k.fadeOut(h.speed,function(){k.detach(),p.removeAttr("style"),o.removeAttr("style"),m.removeAttr("style"),A("out")})}})})})}}}(),function(a,b){v[a]=b}),b.isType("function",f.onReady)&&f.onReady(f)}(g.style,i,g.close),void 0):!1},f=b.ui.CycleLoader=function(c,d){var m,e,f,g,h,i,j,k,l,n,q;return b.isType("json",c)?(e=this,f=b.isType("json",d)?d:{},g=a(c.target).addClass("-cycle-loader"),h=c.offset,i=c.step,j=c.speed,k=this._params={time:b.isType("number",f.time)?f.time:200},l=this._status=!1,n=0,this.onReady=f.onReady,this.play=function(a){return l===!0?!1:(q(),g.fadeIn(k.time,function(){b.isType("function",a)&&a(e)}),void 0)},this.stop=function(a){return l===!1?!1:(g.fadeOut(k.time,function(){clearInterval(m),l=e._status=!1,b.isType("function",a)&&a(e)}),void 0)},q=function(){clearInterval(m),l=e._status=!0;var b,a=g[0];m=setInterval(function(){i>n?n++:n=0,b=-(n*h),a.style.backgroundPosition=b+"px 0"},j)},function(){var a=b.getSize(g);g.css(b.getFixed({offset:5,attach:!1,range:0,width:a.width,height:a.height},{style:{display:"none"}})),b.isType("function",e.onReady)&&e.onReady(e)}(),void 0):!1},g=b.ui.ToggleTab=function(c,d,e){var o,p,q,r,f,g,h,i,k,l,m,n,s,t,u;return c&&d?(f=this,g=b.isType("json",e)?e:{},h=this._controls=a(c).addClass("-toggle-tab-control"),i=this._columns=a(d).addClass("-toggle-tab-column").hide(),k=b.isType("string",g.event)&&"on"+g.event in h.get(0)?g.event:"mouseover",l=this._params={delay:b.isType("number",g.delay)&&"mouseover"===k?g.delay:200,autoplay:b.isType("boolean",g.autoplay)?g.autoplay:!0,clear:b.isType("number",g.clear)?g.clear:b.isType("boolean",g.clear)&&g.clear===!0?100:!1},m=this._active=void 0,n=null,this.onReady=g.onReady,this.onChange=g.onChange,0===h.length||0===i.length?!1:(s=this.toggleClear=function(){return void 0===m?!1:(h.eq(m).removeClass("active"),i.eq(m).hide(),m=f._active=void 0,void 0)},t=this.toggleTo=function(a,c,d){return 0>a||a>=h.length?!1:(h.eq(m).removeClass("active"),i.eq(m).hide(),h.eq(a).addClass("active"),i.eq(a).show(),b.isType("function",f.onChange)&&c===!0&&f.onChange(m,a,d),o in b.coll.elem.lazy&&b.coll.elem.lazy[o].loading(),m=f._active=a,void 0)},u=function(){clearTimeout(q),q=setTimeout(function(){null===n&&(clearTimeout(q),r=!0,s())},l.clear||0)},function(a){l.autoplay&&t(b.isType("number",a)&&a<i.length?a:0,!0,"init"),o=new j(i,{merge:!0})._lazyID,function(){"mouseover"===k&&l.delay>0?h.hover(function(a){var c=b.indexOf(h,a.currentTarget);n=a.currentTarget,(m!==c||m===c&&r)&&(p=setTimeout(function(){t(c,!0,"event")},l.delay))},function(){clearTimeout(p)}):h.on(k,function(a){var c=b.indexOf(h,a.currentTarget);n=a.currentTarget,(m!==c||m===c&&r)&&t(c,!0,"event")}),"mouseover"===k&&l.clear&&(h.on("mouseleave",function(){n=null,u()}),i.on("mouseleave",function(){n=null,u()})),b.isType("function",f.onReady)&&f.onReady(f)}()}(g.active),void 0)):!1},h=b.ui.EasingTab=function(c,d,e){var q,r,s,f,g,h,i,k,l,m,n,o,p,t,u;return c&&d?(f=this,g=b.isType("json",e)?e:{},h=this._controls=a(c).addClass("-easing-tab-control"),i=this._columns=a(d).addClass("-easing-tab-column"),k=this._container=a('<div class="-easing-tab-container clearfix"></div>'),l=this._wrapper=this._columns.parent().addClass("-easing-tab-wrapper"),m=b.isType("string",g.event)&&"on"+g.event in h.get(0)?g.event:"mouseover",n=!b.isType("string",g.mode)||"x"!=g.mode.toLowerCase()&&"y"!=g.mode.toLowerCase()?"x":g.mode,o=this._params={delay:b.isType("number",g.delay)&&"mouseover"==m?g.delay:200,speed:b.isType("number",g.speed)?g.speed:800,easing:b.isType("string",g.easing)?b.getEasing(g.easing):b.getEasing("easeInOutQuart"),autoplay:b.isType("boolean",g.autoplay)?g.autoplay:!0},p=this._active=void 0,this.onReady=g.onReady,this.onChangeStart=g.onChangeStart,this.onChangeEnd=g.onChangeEnd,0===h.length||0===i.length?!1:(t=this.toggleTo=function(a,c,d){b.isType("function",f.onChangeStart)&&f.onChangeStart(p,a,d);var e=h.eq(a),g=i.eq(a),j=b.getSize(g),m=j.width,q=j.height,r=0,s=0;switch(b.each(a,function(a){var c=i.get(a),d=b.getSize(c);s+=d.width,r+=d.height}),e.addClass("active").siblings().removeClass("active"),n){case"x":default:l.stop().animate({width:m,height:q},o.speed,o.easing),k.stop().animate({left:-s},o.speed,o.easing,function(){u(a,c,d)});break;case"y":l.stop().animate({width:m,height:q},o.speed,o.easing),k.stop().animate({top:-r},o.speed,o.easing,function(){u(a,c,d)})}},u=function(a,c,d){b.isType("function",f.onChangeEnd)&&c===!0&&f.onChangeEnd(a,p,d),p=f._active=a,r in b.coll.elem.lazy&&b.coll.elem.lazy[r].loading()},function(a){var c=0,d=0;switch(k.append(i),l.append(k),i.each(function(a,e){var f=b.getSize(e);c+=f.width,d+=f.height}),n){case"x":default:k.css({width:c}),i.css({"float":"left"});break;case"y":k.css({height:d})}o.autoplay&&t(b.isType("number",a)&&a<i.length?a:0,!0,"init"),r=new j(i,{merge:!0})._lazyID,function(){"mouseover"==m&&o.delay>0?h.hover(function(a){var c=b.indexOf(h,a.currentTarget);p!==c&&q!==c&&(q=c,s=setTimeout(function(){t(c,!0,"event")},o.delay))},function(){clearTimeout(s)}):h.on(m,function(a){var c=b.indexOf(h,a.currentTarget);p!==c&&q!==c&&(q=c,t(c,!0,"event"))}),b.isType("function",f.onReady)&&f.onReady(f)}()}(g.active),void 0)):!1},i=b.ui.EasySlider=function(c,d){var w,e,f,g,h,k,m,n,o,p,q,r,s,t,u,v,x,y,z,A,B,C,D,E;return c?(e=this,f=b.isType("json",d)?d:{},g=this._wrapper=a(c).addClass("-easy-slider"),h=this._container=a('<div class="-easy-slider-container"></div>'),k=this._ul=g.children("ul:first"),m=this._lis=k.children("li"),n=this._prop={length:m.length,maxIndex:m.length-1,navigation:b.isType("json",f.navigation)||b.isType("boolean",f.navigation)?f.navigation:!1,pagination:b.isType("boolean",f.pagination)?f.pagination:!0},o=this._params={autoplay:b.isType("number",f.autoplay)?f.autoplay:b.isType("boolean",f.autoplay)&&!f.autoplay?!1:4e3},p=this._active=b.isType("number",f.active)&&f.active<n.length?f.active:0,q=null,r=null,s=null,t=null,u={},v=void 0,0===k.length||0===n.length?!1:(this.onReady=f.onReady,this.onChangeStart=f.onChangeStart,this.onChangeEnd=f.onChangeEnd,h.append(k),g.append(h),x=this.stopPlay=function(){clearTimeout(v)},y=this.startPlay=function(){return o.autoplay?(x(),v=setTimeout(function(){b.inViewport(g)&&A("auto"),y()},o.autoplay),void 0):!1},z=this.slidePrev=function(a){e.slideTo(C("prev"),!0,a||"prev")},A=this.slideNext=function(a){e.slideTo(C("next"),!0,a||"next")},B=function(b){n.hasPagination&&q.each(function(c,d){a(d)[b]("click",u.list[c])}),n.navigation&&(r[b]("click",u.prev),s[b]("click",u.next))},C=function(a){var b;return"prev"===a?b=0===p?n.maxIndex:p-1:"next"===a&&(b=p===n.maxIndex?0:p+1),b},D=function(a,c,d){b.isType("function",e.onChangeStart)&&c===!0&&e.onChangeStart(a.current,a.next,d),e.control&&e.control instanceof i&&!b.inObject(d,"control")&&e.control.slideTo(a.original||a.next,!1,"control "+d),x(),B("off"),n.hasPagination&&(q.eq(a.current).removeClass("active"),q.eq(a.next).addClass("active"))},E=function(a,c,d){var f=a.current,g=a.prev,h=m.eq(f),i=m.eq(g);n.effect.opt.loop&&(f+=n.effect.opt.loop,g+=n.effect.opt.loop,h=t.eq(f),i=t.eq(g)),i.removeClass("active"),h.addClass("active"),y(),B("on"),w in b.coll.elem.lazy&&b.coll.elem.lazy[w].loading(),b.isType("function",e.onChangeEnd)&&c===!0&&e.onChangeEnd(a.current,a.prev,d),p=e._active=a.current},function(c,d){n.columnSize=b.getSize(m[d]),n.wrapSize=b.getSize(h);var i,o,v,f={fade:function(a){return{slideTo:function(b,c,d){var e,f,g;p!==b?(e=m.eq(p),f=m.eq(b),D({current:p,next:b},c,d),e.animate({opacity:0,zIndex:0},a.speed,a.easing),f.show().animate({opacity:1,zIndex:1},a.speed,a.easing,function(){e.hide(),E({current:b,prev:p},c,d)})):"init"===d&&(g=m.eq(p),D({current:p,next:b},c,d),g.css({opacity:1,zIndex:1,display:"block"}),E({current:b,prev:p},c,d))}}},coverIn:function(a){var c=function(a,b){var c;return a>p||"next"===b?c=a==n.maxIndex&&0==p?"-100%":"100%":(p>a||"prev"===b)&&(c="-100%"),{x:{css:{left:c,zIndex:2},ani:{left:0}},y:{css:{top:c,zIndex:2},ani:{top:0}}}};return function(){k.css({height:b.getSize(m[p]).height}),m.hide()}(),{slideTo:function(b,d,e){var g,h,i,f=c(b,e)[a.mode];p!==b?(g=m.eq(p),h=m.eq(b),D({current:p,next:b},d,e),g.css({zIndex:1}),h.show().css(f.css).animate(f.ani,a.speed,a.easing,function(){g.css({zIndex:0}).hide(),E({current:b,prev:p},d,e)})):b===p&&"init"===e&&(i=m.eq(p),D({current:p,next:b},d,e),i.show().css(f.ani),E({current:b,prev:p},d,e))}}},coverOut:function(a){var c=function(a,b){var c;return a>p||"next"==b?c=a==n.maxIndex&&0==p?"-100%":"100%":(p>a||"prev"==b)&&(c="-100%"),{x:{css:{zIndex:1,left:0},ani:{left:c}},y:{css:{zIndex:1,top:0},ani:{top:c}}}};return function(){k.css({height:b.getSize(m[p]).height}),m.hide()}(),{slideTo:function(d,e,f){var h,i,j,g=c(d,f)[a.mode];p!==d?(h=m.eq(p),i=m.eq(d),D({current:p,next:d},e,f),i.show().css(g.css),h.animate(g.ani,a.speed,a.easing,function(){i.css({zIndex:2}),h.css({zIndex:0}).hide(),E({current:d,prev:p},e,f)})):d===p&&"init"===f&&(j=m.eq(p),D({current:p,next:d},e,f),j.show().css(b.mergeJSON({zIndex:2},g.ani)),E({current:d,prev:p},e,f))}}},push:function(a){var c=function(a,b){var c,d,e;return a>p||"next"===b?a==n.maxIndex&&0==p?(c="-100%",d=0,e="100%"):(c="100%",d=0,e="-100%"):p>a||"prev"===b?(c="-100%",d=0,e="100%"):a===p&&"init"===b&&(c=0,d="100%"),{x:{nextCSS:{left:c},nextAni:{left:d},activeAni:{left:e}},y:{nextCSS:{top:c},nextAni:{top:d},activeAni:{top:e}}}};return function(){var c=m.eq(p),d=b.getSize(c);switch(a.mode){case"x":default:k.css({width:d.width});break;case"y":k.css({height:d.height})}}(),{slideTo:function(d,e,f){var h,i,j,g=c(d,f)[a.mode];d!==p?(h=m.eq(p),i=m.eq(d),D({current:p,next:d},e,f),h.animate(g.activeAni,a.speed,a.easing),i.css(g.nextCSS).animate(g.nextAni,a.speed,a.easing,function(){i.addClass("active"),h.removeClass("active"),E({current:d,prev:p},e,f)})):d===p&&"init"===f&&(j=m.eq(p),D({current:p,next:d},e,f),j.css(b.mergeJSON(g.nextCSS,g.nextAni)).addClass("active"),E({current:d,prev:p},e,f))}}},slide:function(c){var f,d={width:["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","marginLeft","marginRight","width"],height:["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","marginTop","marginBottom","height"]},i=b.getCSS3Name(["transition","transform"]),j=i.transition[0]&&i.transform[0],o=function(a,e){var f,g,h,i,j;for(a+=c.loop,f=0,g=0,h=b.getSize(t[a],d),i=0;a>i;i++)j=b.getSize(t[i],d),f+=j.width,g+=j.height;switch(c.align){case"left":break;case"center":h.width>n.wrapSize.width?f+=(h.width-n.wrapSize.width)/2:h.width<n.wrapSize.width&&(f-=(n.wrapSize.width-h.width)/2),h.height>n.wrapSize.height?g+=(h.height-n.wrapSize.height)/2:h.height<n.wrapSize.height&&(g-=(n.wrapSize.height-h.height)/2);break;case"right":}switch(e&&(f+=e.x||0,g+=e.y||0),c.mode){case"x":default:return{translate:"translate3d("+-f+"px , 0px, 0px)",animate:{marginLeft:-f},index:a};case"y":return{translate:"translate3d(0px , "+-g+"px, 0px)",animate:{marginTop:-g},index:a}}},q=function(a,b,d){j?(k[0].style[i.transition[0]]=b.transition,k[0].style[i.transform[0]]=a.translate,setTimeout(d.transform,c.speed)):"none"===b.animate?(k.css(a.animate),d.animate()):k.stop().animate(a.animate,c.speed,b.animate,d.animate)},r=function(a,b){var d=a,e=a,f=!1;if(c.loop)switch(b){case"left":case"down":case"prev":case"control left":case"control down":case"control prev":a===n.maxIndex&&(a=n.maxIndex,e=-1,f=!0);break;case"auto":case"right":case"up":case"next":case"control auto":case"control right":case"control up":case"control next":0===a&&(e=n.length,a=0,f=!0)}return{index:a,loopIndex:e,original:d,reset:f}},s=function(){var p,q,e=[],f=0,g=0,h=0,i=[],j=0,l=0,o=0;if(c.loop)for(p=0,q=c.loop;q>p;p++)e.push(m.eq(n.maxIndex-p).clone(!0).attr({"loop-index":n.maxIndex-p,"loop-clone":!0})),i.push(m.eq(p).clone(!0).attr({"loop-index":p,"loop-clone":!0}));return b.each(e,function(a,c){h++,k.prepend(c);var e=b.getSize(c,d);f+=e.width,g+=e.height}),b.each(i,function(a,c){o++,k.append(c);var e=b.getSize(c,d);j+=e.width,l+=e.height}),m.each(function(b,c){a(c).attr({"loop-index":b,"loop-clone":!1})}),k.children("li")},u=function(){var g,h,e=0,f=0;switch(b.isType("number",c.column)&&c.column>=1?(g=n.wrapSize.width/c.column,h=n.wrapSize.height/c.column,b.each(t,function(i,j){var k,l=b.getSize(j,b.mergeJSON(d,{preset:{width:0,height:0}}));switch(c.mode){case"x":default:a(j).css({width:g-l.width});break;case"y":a(j).css({height:h-l.height})}k=b.getSize(j,d),e+=k.width,f+=k.height})):b.each(t,function(a,c){var g=b.getSize(c,d);e+=g.width,f+=g.height}),c.mode){case"x":default:k.css({width:e});break;case"y":k.css({height:f})}},v=function(){n.wrapSize=b.getSize(h),x(),u(),e.slideTo(p,!1,"none")};return function(){t=e._loopLis=c.loop?s():m,c.touch&&j&&function(a){var d=null;f=new l(a,{onReady:function(){},onDragStart:function(){x(),this._target[0].style[i.transition[0]]="0ms",d=this._target[0].style[i.transform[0]].slice("translate3d(".length,-")".length).split(",")},onDragMove:function(a){var e,f;if(!a||a&&!a.type)return this.bindEvent("on"),!1;switch(c.mode){case"x":default:e=a.x/n.wrapSize.width*b.getSize(m[p]).width*c.ratio,e=parseInt(d[0])-e,this._target[0].style[i.transform[0]]="translate3d("+e+"px , 0px, 0px)";break;case"y":f=a.y*c.ratio,f=parseInt(d[1])-e,this._target[0].style[i.transform[0]]="translate3d(0px , "+f+"px, 0px)"}},onDragEnd:function(a){if(!a||a&&!a.type)return this.bindEvent("on"),!1;switch(c.mode){case"x":default:switch(a.type){case"right":a.x>=.2*n.wrapSize.width&&(p<n.maxIndex||c.loop)?e.slideTo(C("next"),!0,a.type):e.slideTo(p,!1,"none");break;case"left":Math.abs(a.x)>=.2*n.wrapSize.width&&(0!==p||c.loop)?e.slideTo(C("prev"),!0,a.type):e.slideTo(p,!1,"none");break;case"up":case"down":e.slideTo(p,!1,"none")}break;case"y":switch(a.type){case"up":a.y>=.2*n.wrapSize.height&&(p<n.maxIndex||c.loop)?e.slideTo(C("next"),!0,a.type):e.slideTo(p,!1,"none");break;case"down":Math.abs(a.y)>=.2*n.wrapSize.height&&(0!==p||c.loop)?e.slideTo(C("prev"),!0,a.type):e.slideTo(p,!1,"none");break;case"right":case"left":e.slideTo(p,!1,"none")}}},onDragCancel:function(){e.slideTo(p,!1,"none")}},{mode:c.mode})}(k),u(),b.evt.onResize(v)}(),{slideTo:function(a,b,d){if(a===p&&"page"===d)return!1;var a=r(a,d),e={transform:function(){E({current:a.index,prev:p,original:a.original},b,d),!f||"none"!==d&&"left"!==d&&"right"!==d&&"up"!==d&&"down"!==d||f.bindEvent("on")},animate:function(){E({current:a.index,prev:p,original:a.original},b,d)}},g={transition:i.transform[1]+" "+c.speed+"ms",animate:c.easing};D({current:p,next:a.index,original:a.original},!0,d),a.reset===!0&&(e={transform:function(){k[0].style[i.transition[0]]="0ms",k[0].style[i.transform[0]]=o(a.index).translate,E({current:a.index,prev:p,original:a.original},b,d),!f||"none"!==d&&"left"!==d&&"right"!==d&&"up"!==d&&"down"!==d||f.bindEvent("on")},animate:function(){k.css(o(a.index).animate),E({current:a.index,prev:p,original:a.original},b,d)}}),"init"===d&&(g.transition="none",g.animate="none"),q(o(a.loopIndex),g,e)}}}},F=b.isType("json",c.effect)&&b.isType("json",c.effect.options)?c.effect.options:{ratio:.5,align:"left",column:"auto",touch:!1,loop:void 0,mode:!b.isType("string",c.mode)||"x"!=c.mode.toLowerCase()&&"y"!=c.mode.toLowerCase()?"x":c.mode.toLowerCase(),speed:b.isType("number",c.speed)?c.speed:500,easing:b.isType("string",c.easing)?b.getEasing(c.easing):b.getEasing("easeInOutQuart")};if(b.isType("string",c.effect))switch(c.effect){case"slide":case"push":case"coverIn":case"coverOut":case"fade":v=c.effect;break;default:v="fade"}else if(b.isType("json",c.effect))switch(c.effect.name){case"slide":case"push":case"coverIn":case"coverOut":case"fade":v=c.effect.name;break;default:v="fade"}else c.effect||(v="fade");switch(v){case"slide":o=n.effect={name:v,type:"slide",pages:"multi",opt:F};break;case"push":case"coverIn":case"coverOut":o=n.effect={name:v,type:"slide",pages:"single",opt:F};break;case"fade":default:o=n.effect={name:v,type:"fixed",pages:"single",opt:F}}switch(b.mergeJSON({mode:!b.isType("string",F.mode)||"x"!==F.mode.toLowerCase()&&"y"!==F.mode.toLowerCase()?!b.isType("string",c.mode)||"x"!==c.mode.toLowerCase()&&"y"!==c.mode.toLowerCase()?"x":c.mode.toLowerCase():F.mode.toLowerCase(),speed:b.isType("number",F.speed)?F.speed:b.isType("number",c.speed)?c.speed:500,easing:b.isType("string",F.easing)?b.getEasing(F.easing):b.isType("string",c.easing)?b.getEasing(c.easing):b.getEasing("easeInOutQuart")},o.opt),"slide"===o.type&&"multi"===o.pages&&(b.mergeJSON({ratio:b.isType("number",F.ratio)&&F.ratio>=.1&&F.ratio<=1?F.ratio:1,align:"left"===c.align||"center"===F.align?F.align:"left",column:"auto"===c.column||b.isType("number",F.column)&&F.column>0&&F.column<=n.length?F.column:"auto",touch:b.isType("boolean",F.touch)?F.touch:!1},o.opt),b.isType("number",F.loop)?o.opt.loop=0===F.loop?0:F.loop<1?1:F.loop>n.length?n.length:F.loop:b.isType("boolean",F.loop)?o.opt.loop=F.loop===!0?n.length:0:"x"===o.opt.mode?o.opt.loop=n.columnSize.width>.8*n.wrapSize.width?1:n.length:"y"===o.opt.mode&&(o.opt.loop=n.columnSize.height>.8*n.wrapSize.height?1:n.length)),o.name){case"coverIn":case"coverOut":case"push":i=f[o.name](o.opt),k.addClass("-easy-slider-effect-"+o.name+"-"+o.opt.mode);break;case"slide":i=f.slide(o.opt),k.addClass("-easy-slider-effect-"+o.name+"-"+o.opt.mode+" clearfix");break;case"fade":default:i=f.fade(o.opt),k.addClass("-easy-slider-effect-fade")}b.each(i,function(a,b){e[a]=b}),w=new j(k,{merge:!0,wrapper:h})._lazyID,function(c){if(!c)return!1;var d=a('<div class="-easy-slider-pagination"></div>');n.hasPagination=!0,u.list=[],b.each(n.length,function(a){d.append('<a class="rel-'+(a+1)+'">'+(a+1)+"</a>"),u.list.push(function(){e.slideTo(a,!0,"page")})}),q=e._pagers=d.find("a"),g.append(d)}(n.pagination),function(c){return c?(u.prev=function(){z()},u.next=function(){A()},r=e._prevBtn=a('<a class="-easy-slider-nav prev-btn"></a>'),s=e._nextBtn=a('<a class="-easy-slider-nav next-btn"></a>'),g.append(r).append(s),b.isType("json",n.navigation)&&n.navigation.icon&&(r.append("<i></i>"),s.append("<i></i>"),n.navigation.under&&(r.append("<b></b>"),s.append("<b></b>"))),void 0):!1}(n.navigation),function(){g.on("mouseover",x),g.on("mouseleave",y),y(),b.isType("function",e.onReady)&&e.onReady(e)}(),B("on"),e.slideTo(p,!1,"init")}(f,p),void 0)):!1},j=b.ui.LazyLoad=function(c,d){var i,e,f,g,h,l,m,n,o;return c?(e=this,f=b.isType("json",d)?d:{},g=a(window),h=f.wrapper||window,this.destroy=function(){var a=arguments[0]||e._lazyID,c=b.coll.elem.lazy[a];g.off("scroll",c.loading),b.coll.elem.lazy[a]=c=c._images=c._target=c.loading=c.destroy=null,delete b.coll.elem.lazy[a]},l=this.loading=function(){b.each(i,function(c,d){var e=a(d);b.inViewport(d,{wrapper:h})&&e.trigger("appear",!0)})},m=function(c,d){var e=[],f=[],g=function(a){return d?"img"==a.nodeName.toLowerCase()&&a.getAttribute("data-lazy")&&a.getAttribute("data-lazy").length>0:"img"==a.nodeName.toLowerCase()&&void 0===a.isLazy&&a.getAttribute("data-lazy")&&a.getAttribute("data-lazy").length>0};return b.isType("array",c)?b.each(c,function(b,c){a(c).each(function(a,b){e.push(b)})}):a(c).each(function(a,b){e.push(b)}),b.each(e,function(b,c){c.childNodes.length>0?a(c).find("img[data-lazy]").each(function(a,b){g(b)&&(b.isLazy=!0,f.push(b))}):g(c)&&(c.isLazy=!0,f.push(c))}),f},n=function(a,b){var c=new Image,d=a.getAttribute("data-lazy");c.src=d,c.complete?o(a,c.src,d,b):(c.onload=function(){o(a,c.src,d,b)},c.src=c.src)},o=function(c,d,f,g){var h=a(c);h.fadeOut(400,function(){c.src=d,h.fadeIn(400,function(){g===!0&&b.each(b.coll.elem.lazy,function(d,g){b.each(g._images,function(h,i){if(!i)return!1;var j=i.getAttribute("data-lazy");(i===c||j===f)&&(g._images.splice(b.indexOf(g._images,i),1),0===g._images.length&&e.destroy(d),j===f&&a(i).trigger("appear",!1)),i=null})}),h.removeClass("-lazy-load").attr("data-lazy","success"),h=c=null})})},function(c,d){if(i=e._images=m(c,d),0===i.length)return void 0;var f=e._lazyID=b.getRandom();b.coll.elem.lazy[f]=e,function(c){a(c).one("appear",function(a,b){n(a.target,b)}).addClass("-lazy-load").attr({src:b.root+"style/spacer.gif"}),g.on("scroll",l),l()}(i)}(c,b.isType("boolean",f.merge)?f.merge:!1),void 0):!1},k=b.ext.AjaxForm=function(c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r;return!b.isType("array",c)&&0===c.length||!b.isType("json",d)?!1:(f=this,g=b.isType("json",e)?e:{},h=this._form=a('<form class="-ajax-form"></form>'),i=this._content=a('<div class="-ajax-form-content"></div>'),j=this._box={},k=this._elem={},l=j["_action"]=a('<div class="-ajax-form-action"></div>'),m=k["_submit"]=a('<input type="button" class="-ajax-form-sumit-btn">'),this.onReady=g.onReady,l.append(m),n=function(c){var h,i,j,l,m,n,d=b.isType("json",c.prop)?c.prop:{},e=a("<dl></dl>").addClass("-ajax-form-dl-"+d.name),f=a("<dt></dt>"),g=a("<dd></dd>");switch(c.tag){case"select":h=a(b.getSelecet(d.options,{empty:d.value,prop:{selected:d.selected}})),j=a("<i></i>");break;case"input":default:switch(d.type){case"number":case"email":case"url":case"date":case"password":h=a('<input type="'+d.type+'">'),b.isType("string",d.value)&&b.ui.setPlaceholder(h,d.value);break;case"hidden":h=a('<input type="'+d.type+'">'),(b.isType("string",d.value)||b.isType("number",d.value))&&h.val(d.value),e.css({display:"none"});break;case"checkbox":case"radio":h=[],b.each(d.value,function(b,c){var e=a('<input value="'+c+'" type="'+d.type+'">');h.push([e,c])});break;case"button":h=a('<input type="'+d.type+'">'),b.isType("string",d.value)&&h.val(d.value);break;case"file":h=a('<input type="'+d.type+'">');break;case"text":default:h=a('<input type="text">'),b.isType("string",d.value)&&b.ui.setPlaceholder(h,d.value)}break;case"textarea":h=a("<textarea></textarea>"),b.isType("string",d.value)&&b.ui.setPlaceholder(h,d.value)}if(b.isType("array",h))for(b.each(h,function(c,e){var f,h;b.each(d,function(a,d){if("value"!==a)e[0][0][a]=d;else if("value"===a){var g=d[c];b.isType("array",g)?(f=g[1],h=g[0]):(f=g,h=g)}}),("radio"===d.type||"checkbox"===d.type)&&(e[0][0].checked=!1,o(e[0][0],d.checked,c,f)),i=a("<label></label>"),e[0].val(f),i.append(e[0]).append(h),g.append(i)}),l=k[d.name]=a(null),m=0;m<h.length;m++)l.push(h[m][0][0]);else b.each(d,function(a,b){"value"!==a&&"options"!==a&&(h[0][a]=b)}),g.append(h),j&&g.append(j),k[d.name]=h;return b.isType("string",c.title)&&""!=c.title&&(c.require&&(n=a("<b>*</b>"),f.append(n)),f.append(c.title+"："),e.append(f)),e.append(g),e},o=function(a,c,d,e){b.isType("number",c)&&c===d?a.checked=!0:b.isType("string",c)&&c==e?a.checked=!0:b.isType("array",c)&&b.each(c,function(b,c){o(a,c,d,e)})},p=function(){var b,d,l,m,e,f,g,i,j,k,n,a={};for(b=0,d=c.length;d>b;b++){if(e=c[b],f=e.tag,g=e.require,i=e.prop,j=i.name,k=i.type,"input"===f&&"checkbox"===k){for(l=h.find('[name="'+j+'"]'),m=[],n=0;n<l.length;n++)l[n].checked&&m.push(l[n].value);m=m.toString()}else"input"===f&&"radio"===k?(l=h.find('[name="'+j+'"]:checked'),m=l.val()):(l=h.find('[name="'+j+'"]'),m=l.val());if(a[j]=q(e,m,l),g&&(""==a[j]||!a[j]))return!1}r(a)},q=function(a,c,d){var e=a.notice,f=a.require,g=a.prop;if(f)if(f===!0){if(!c||""===c||c===g.value)return alert(e),d.focus(),!1}else if(b.isType("regexp",f)){if(!f.test(c))return alert(e),d.focus(),!1}else{if(!b.isType("regexpstr",f))return alert(e),d.focus(),!1;if(!new RegExp(f).test(c))return alert(e),d.focus(),!1}return c},r=function(a){var f,g,i,j,k,c=d.event,e=d.xhr;b.isType("json",e)?(f=e.url,g=!b.isType("string",e.type)||"GET"!=e.type.toUpperCase()&&"POST"!=e.type.toUpperCase()?"GET":e.type.toUpperCase(),i=e.dataType,e.data=b.isType("json",e.data)?e.data:{},i===!1?(j="",k=f+"?",h[0].method=g,h[0].target="_self","POST"==g?(b.each(e.data,function(a,b){j+=a+"="+b+"&"}),h[0].action=(k+=j).slice(0,-1),b.isType("function",c)&&c({url:f,type:g,data:e.data,post:a,query:j,action:k,dataType:i})):(a=b.mergeJSON(a,e.data),b.each(a,function(a,b){j+=a+"="+b+"&"}),h[0].action=(k+=j).slice(0,-1),b.isType("function",c)&&c({url:f,type:g,data:a,query:j,dataType:i})),h[0].submit()):c({url:f,type:g,data:b.mergeJSON(a,e.data),dataType:b.isType("string",e.dataType)?e.dataType:"json"})):c()},function(d,e,g){if(b.isType("string",d)&&h.addClass(d),b.each(c,function(a,b){var c=n(b);j[b.prop.name]=c,i.append(c)}),b.each(e,function(a,b){"className"==a?m.addClass(b):m[0][a]=b}),g){var o=k["_reset"]=a('<input type="reset" class="-ajax-form-reset-btn">');b.each(g,function(a,b){"className"==a?o.addClass(b):o[0][a]=b}),l.append(o)}i.append(l),h.append(i),function(){m.on("click",p),h.on("keydown",function(a){return 13==a.keyCode?!1:void 0})}(),b.isType("function",f.onReady)&&f.onReady(h,f)}(g.style,b.isType("json",g.submit)?g.submit:null,b.isType("json",g.reset)?g.reset:null),void 0)},l=b.ext.DragAPI=function(c,d,e){var j,k,l,m,n,p,q,r,s,t,u,f=this,g=b.isType("json",e)?e:{},h=this._prop={mode:!b.isType("string",g.mode)||"x"!==g.mode.toLowerCase()&&"y"!==g.mode.toLowerCase()?"x":g.mode.toLowerCase()},i=this._target=a(c).addClass("-touch"),o=!1;this.onReady=d.onReady,this.onDragStart=d.onDragStart,this.onDragMove=d.onDragMove,this.onDragEnd=d.onDragEnd,this.onDragCancel=d.onDragCancel,p=this.bindEvent=function(a){"on"===a?(o=!1,i.on(j.start,k.start)):"off"===a&&(i.off(j.start,k.start),i.off(j.move,k.move),i.off(j.end,k.end),i.off(j.cancel,k.cancel),o===!1&&p("on"))},q=function(a,b){var c,f,g,d=Math.abs(a),e=Math.abs(b);return f=0>a?m.x="left":a>0?m.x="right":void 0,g=0>b?m.y="down":b>0?m.y="up":void 0,f||g?f&&!g?c=f:!f&&g?c=g:f&&g&&(c="left"==f?d>e?"left":b>0?"up":"down":d>e?"right":b>0?"up":"down"):c=void 0,{type:c,x:a,y:b}},r=function(a){n=l=void 0,"touchstart"!==a.type&&a.preventDefault(),p("off"),i.on(j.move,k.move),i.on(j.end,k.end),i.on(j.cancel,k.cancel),m.sx=b.info.os.mobile?a.originalEvent.targetTouches[0].pageX:a.pageX,m.sy=b.info.os.mobile?a.originalEvent.targetTouches[0].pageY:a.pageY,f.onDragStart({type:void 0,x:m.sx,y:m.sy})},s=function(a){o=!0;var d=b.info.os.mobile?a.originalEvent.targetTouches[0].pageX:a.pageX,e=b.info.os.mobile?a.originalEvent.targetTouches[0].pageY:a.pageY;if(l=q(m.sx-d,m.sy-e),void 0===n)switch(h.mode){case"x":default:"up"===l.type||"down"===l.type?n=!0:("left"===l.type||"right"===l.type)&&(n=!1);break;case"y":"left"===l.type||"right"===l.type?n=!0:("up"===l.type||"down"===l.type)&&(n=!1)}n===!1&&(a.preventDefault(),f.onDragMove(l))},t=function(){n===!1&&(p("off"),f.onDragEnd(l))},u=function(a){a.preventDefault(),a.stopPropagation(),n===!1&&(p("off"),f.onDragCancel(l))},function(){j=function(){return"ontouchstart"in window&&b.info.os.mobile?{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}:"onmousedown"in document.body?{start:"mousedown",move:"mousemove",end:"mouseup",cancel:"mouseleave"}:window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointerout"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp",cancel:"MSPointerOut"}:void 0}(),k={start:function(a){r(a,this)},move:function(a){s(a,this)},end:function(a){t(a,this)},cancel:function(a){u(a,this)}},m={sx:0,sy:0,mx:0,my:0,ex:0,ey:0,x:void 0,y:void 0,status:void 0},p("on"),f.onReady()}()},m=b.com.ScrollTop=function(c,d){var o,p,e,f,g,h,i,j,k,l,m,n,q,r;return c?(e=this,f=b.isType("json",d)?d:{},g=this._params={easing:b.isType("string",f.easing)?b.getEasing(f.easing):b.getEasing("easeInOutQuart"),mode:b.isType("integer",f.mode)&&f.mode>=0&&f.mode<=2?f.mode:1,speed:b.isType("number",f.speed)?f.speed:500,autohide:b.isType("number",f.autohide)?f.autohide:b.isType("boolean",f.autohide)&&f.autohide===!0?4e3:!1},h=this._wrapper=a(c),i=this._target=a('<a class="-srcoll-top"></a>'),j=b.isType("boolean",f.icon)?f.icon:!0,k=b.isType("boolean",f.under)?f.under:!1,l=b.isType("string",f.text)?f.text:void 0,m=b.isType("string",f.style)?f.style:void 0,n=b.isType("string",f.insert)?f.insert:"append",this.onReady=f.onReady,q=function(){clearTimeout(o),o=setTimeout(function(){b.size.top>(g.mode?b.size.height:0)?(i.fadeIn(200).css({display:"block"}),r()):i.fadeOut(200)},100)},r=function(){return!g.autohide&&i.is(":visible")?!1:(clearTimeout(p),p=setTimeout(function(){i.stop().fadeOut(200)},g.autohide),void 0)},function(){switch(j&&i.append("<i></i>"),k&&i.append("<b></b>"),l&&(j||k?i.append("<span>"+l+"</span>"):i.append(document.createTextNode(l))),m&&i.addClass(m),g.mode&&b.size.top<b.size.height&&2!==g.mode?i.css({display:"none"}):r(),n){case"prepend":case"after":case"before":h[n](i);break;case"append":default:h.append(i)}!function(){i.on("click",function(){b.coll.elem.$scroll.animate({scrollTop:0},g.speed,g.easing)}),2!==g.mode&&b.evt.onChange(q)}()}(),b.isType("function",e.onReady)&&e.onReady(i,e),void 0):!1},n=b.com.DatePicker=function(c,d){var w,x,y,K,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,z,A,B,C,D,E,F,G,H,I,J,L,M,N,O,P,Q,R,S,T;return c?(e=this,d=b.isType("json",d)?d:{},f=this._target=a(c),g=this._wrapper=d.wrapper?a(d.wrapper):a(document.body),h=this._params={history:b.isType("boolean",d.history)?d.history:!1,hour:b.isType("array",d.hour)||b.isType("string",d.hour)?d.hour:b.isType("boolean",d.hour)&&d.hour?!0:!1},i=a('<div class="-date-picker"></div>'),j=a('<div class="bsjs-calendar"></div>'),k=a('<div class="calendar-header"></div>'),l=a('<div class="calendar-week clearfix"><em>日</em><em>一</em><em>二</em><em>三</em><em>四</em><em>五</em><em>六</em></div>'),m=a('<div class="calendar-body clearfix"></div>'),n=a('<div class="calendar-footer clearfix"></div>'),o=a('<button class="prev-month"></button>'),p=a('<button class="next-month"></button>'),q=a('<em class="today-btn">今天</em>'),r=a('<em class="close-btn">关闭</em>'),s=a('<div class="calendar-date clearfix"></div>'),t=a("<b>00</b><b>01</b><b>02</b><b>03</b><b>04</b><b>05</b><b>06</b><b>07</b><b>08</b><b>09</b><b>10</b><b>11</b><b>12</b><b>13</b><b>14</b><b>15</b><b>16</b><b>17</b><b>18</b><b>19</b><b>20</b><b>21</b><b>22</b><b>23</b>"),u=a('<div class="calendar-hour clearfix"></div>'),v=a('<em class="back-btn">重新选择日期</em>'),z=this._input=null,A=new Date,B=A.getFullYear(),C=A.getMonth(),D=A.getDate(),E=d.start?d.start:B,F=d.end?d.end:B+1,G=F-E,H=[],I=null,J=void 0,this.onReady=d.onReady,this.onShow=d.onShow,this.onHide=d.onHide,this.onInput=d.onInput,L=this.addTarget=function(c){a(c).on("click",function(){z=e._input=a(this),N(),i.css(P(this)).fadeIn(200,function(){b.isType("function",e.onShow)&&e.onShow(e)}),g.append(i)})},M=this.closePicker=function(){i.fadeOut(200,function(){i.detach(),b.isType("function",e.onHide)&&e.onHide(e)})},N=function(){var g,h,i,j,k,l,m,n,q,r,s,t,u,v,y,a=[31,28,31,30,31,30,31,31,30,31,30,31],b=w.get(0).selectedIndex,c=parseInt(w.val()),d=parseInt(x.val()),e=new Date(c,d),f=e.getDay();for(0==f&&(f=7),0==d?(g=11,h=d+1,i=c-1,j=c):11==d?(g=d-1,h=0,i=c,j=c+1):(g=d-1,h=d+1,i=c,j=c),0==d&&0==b?o.hide():11==d&&b==G?p.hide():(o.show(),p.show()),k=a[d],l=a[g],m=a[h],1==d&&(0==c%4&&0!=c%100||0==c%400)&&(k=29),1==g&&(0==i%4&&0!=i%100||0==i%400)&&(l=29),1==h&&(0==j%4&&0!=j%100||0==j%400)&&(m=29),n=[],q=42-f-k,r=0;f>r;r++)n.push(l-r);for(n.reverse(),r=0;k>r;r++)n.push(r+1);for(r=0;q>r;r++)n.push(r+1);s=z.val(),s&&(t=s.split("-"),u=parseInt(t[0]),v=parseInt(t[1])-1,y=parseInt(t[2])-1),O(n,f,k,c,d,B==c&&C==d?!0:!1,u==c&&v==d?!0:!1,y)},O=function(b,c,d,e,f,g,i,j){var l,k=c+D-1;for(i&&(j+=c),l=0;l<b.length;l++)!function(b,m){var n=a(m).empty().removeClass().off("click");c>l||l>=c+d?n.text(b):(h.history?n.addClass("has").text(b).on("click",function(){Q(this,e,f+1,b)}):B>e||e===B&&C>f||e===B&&f===C&&D>b?n.text(b):n.addClass("has").text(b).on("click",function(){Q(this,e,f+1,b)}),l==k&&g&&n.addClass("now"),l==j&&i&&n.addClass("current"))}(b[l],y[l])},P=function(c){var d,e,f,h,i,j,k,l,m,n,o,p,r;switch(J=void 0!==J?J:function(){for(var a=g[0],c=!1;a&&a!==document.body&&11!==a.nodeType&&(c="Trident"==b.info.browser.kernel?"fixed"===a.currentStyle.position:"fixed"===window.getComputedStyle(a,null).position,c!==!0);)a=a.parentNode;return c}(),f=a(document).height(),h=g.offset(),i=0,j=0,k=a(c),l=parseInt(k.css("marginLeft")),m=parseInt(k.css("marginTop")),n=b.mergeJSON(b.getSize(c),{marginLeft:isNaN(l)?0:l,marginTop:isNaN(m)?0:m}),g[0]===document.body){case!0:o=k.offset(),p=b.getSize(c,{width:["marginLeft"],height:["marginTop"]}),i+=o.left-p.width,j+=o.top-p.height;break;case!1:for(;c&&c!==g[0];)a(c),r=a(c).position(),i+=r.left,j+=r.top,c=a(c).offsetParent()[0]}return d={left:i+n.marginLeft,top:j+n.height+n.marginTop+1},e=J?b.size.height-(h.top+d.top-b.size.top)>=I.height?d:{left:i+n.marginLeft,top:j-I.height+n.marginTop-1}:f-(h.top+d.top)>=I.height?d:{left:i+n.marginLeft,top:j-I.height+n.marginTop-1},b.mergeJSON({position:"absolute",zIndex:b.getZIndex(c)},e)},Q=function(a,c,d,f){K=S(c,d,f),h.hour?(u.fadeIn(200),z.val().slice(0,10)===K&&t.eq(parseInt(z.val().slice(11,-3))).addClass("now").siblings().removeClass("now")):(z.val(K),b.isType("function",e.onInput)&&e.onInput(K),M())},R=function(a){z.val(K+" "+a),b.isType("function",e.onInput)&&e.onInput(K+" "+a),T(),M()},S=function(a,b,c){var d=[a.toString(),b.toString(),c.toString()];return 1==d[1].length&&(d[1]="0"+d[1]),1==d[2].length&&(d[2]="0"+d[2]),d.toString().replace(/,/g,"-")},T=function(){u.fadeOut(200)},function(c){var d,z,A,E;if(h.hour){if(b.isType("array",h.hour))b.each(h.hour,function(a,b){t.eq(b).addClass("enable")});else if(b.isType("string",h.hour)&&b.inObject(h.hour,"-"))for(d=h.hour.split("-"),z=0;24>z;z++)z>=d[0]&&z<=d[1]&&t.eq(z).addClass("enable");else t.addClass("enable");u.append(t).append(v),m.append(u)}for(A=0;G>=A;A++)H.push([c+A+"年",c+A]);for(w=a(b.getSelecet(H,{empty:null,prop:{selected:b.inObject(H,B),className:"year"}})),x=a(b.getSelecet([["一月",0],["二月",1],["三月",2],["四月",3],["五月",4],["六月",5],["七月",6],["八月",7],["九月",8],["十月",9],["十一月",10],["十二月",11]],{empty:null,prop:{selected:C,className:"month"}})),E=0;6>E;E++)s.append("<b></b><b></b><b></b><b></b><b></b><b></b><b></b>");y=s.find("b"),k.append(o).append(p).append(w).append(x),m.append(s),n.append(q).append(r),j.append(k).append(l).append(m).append(n),I=b.getSize(i.append(j).prependTo(document.body).css({visibility:"hidden"})),i.detach().css({visibility:"visible"}),"static"===g.css("position")&&g.css({position:"relative"}),function(){o.on("click",function(){var a=parseInt(w.val()),b=parseInt(x.val());0===b?w.get(0).selectedIndex>0&&(a--,w.val(a),x.val(11),N()):(b--,x.val(b),N())}),p.on("click",function(){var a=parseInt(w.val()),b=parseInt(x.val());11===b?w.get(0).selectedIndex<G&&(a++,w.val(a),x.val(0),N()):(b++,x.val(b),N())}),q.on("click",function(){w.val(B),x.val(C),Q(this,B,C+1,D)}),t.each(function(b,c){var d=a(c),e=d.text()+":00";d.hasClass("enable")&&d.on("click",function(){R(e)})}),r.on("click",M),v.on("click",T),w.on("change",N),x.on("change",N),L(f)}(),b.isType("function",e.onReady)&&e.onReady(e)}(E),void 0):!1},b};
});